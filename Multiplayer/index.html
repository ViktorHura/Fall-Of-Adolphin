<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
	<script> 
    var Enabled;
	var map;
	</script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="//threejs.org/build/three.js"></script>
    <script src="/js/client_world.js"></script>

    <style>
        body {
            margin: 0px;
            overflow: hidden;
        }
    </style>
</head>
<body>

<div id="container"></div>
<script>

    var socket = io();

    socket.on('updatePosition', function(data){
        updatePlayerPosition(data);
    });
    socket.on('connect', function(){
        loadWorld();
        socket.emit('requestOldPlayers', {});
    });
    socket.on('createPlayer', function(data){
        createPlayer(data);
    });
    socket.on('addOtherPlayer', function(data){
        addOtherPlayer(data);
    });
    socket.on('removeOtherPlayer', function(data){
        removeOtherPlayer(data);
    });

</script>

<script>


				var havePointerLock = 'pointerLockElement' in document || 'mozPointerLockElement' in document || 'webkitPointerLockElement' in document;
			
						if ( havePointerLock ) {
			
							var element = document.body;
			
							var pointerlockchange = function ( event ) {
			
								if ( document.pointerLockElement === element || document.mozPointerLockElement === element || document.webkitPointerLockElement === element ) {
							
									Enabled = true;
			
								} else {
			
									Enabled = false;
			
								}
			
							};
			
							var pointerlockerror = function ( event ) {
			
								
							};
			
							// Hook pointer lock state change events
							document.addEventListener( 'pointerlockchange', pointerlockchange, false );
							document.addEventListener( 'mozpointerlockchange', pointerlockchange, false );
							document.addEventListener( 'webkitpointerlockchange', pointerlockchange, false );
			
							document.addEventListener( 'pointerlockerror', pointerlockerror, false );
							document.addEventListener( 'mozpointerlockerror', pointerlockerror, false );
							document.addEventListener( 'webkitpointerlockerror', pointerlockerror, false );
			
							document.addEventListener( 'click', function ( event ) {
			
								
			
								// Ask the browser to lock the pointer
								element.requestPointerLock = element.requestPointerLock || element.mozRequestPointerLock || element.webkitRequestPointerLock;
			
								if ( /Firefox/i.test( navigator.userAgent ) ) {
			
									var fullscreenchange = function ( event ) {
			
										if ( document.fullscreenElement === element || document.mozFullscreenElement === element || document.mozFullScreenElement === element ) {
			
											document.removeEventListener( 'fullscreenchange', fullscreenchange );
											document.removeEventListener( 'mozfullscreenchange', fullscreenchange );
			
											element.requestPointerLock();
										}
			
									};
			
									document.addEventListener( 'fullscreenchange', fullscreenchange, false );
									document.addEventListener( 'mozfullscreenchange', fullscreenchange, false );
			
									element.requestFullscreen = element.requestFullscreen || element.mozRequestFullscreen || element.mozRequestFullScreen || element.webkitRequestFullscreen;
			
									element.requestFullscreen();
			
								} else {
			
									element.requestPointerLock();
			
								}
			
							}, false );
			
						} else {
			
							
			
						}
						
						
				var loader = new THREE.ObjectLoader();
                 loader.load("/js/scene.json",function ( obj ) {
				 
				 map = obj;
				 
                 scene.add( map );
				 player.position.y = 0.5;
				 map.scale.set(0.01,0.01,0.01);
				 
        });


</script>

</body>
</html>